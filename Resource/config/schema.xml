<?xml version="1.0" encoding="UTF-8"?>
<database>
    <table name="users" alias="Users" tableClass="Users\Domain\Table\UsersTable"
           entityClass="Users\Domain\Entity\User">
        <column name="id" type="biginteger" null="false"/>
        <column name="username" type="string" null="false"/>
        <column name="email" type="string" null="false"/>
        <column name="password" type="string" null="false"/>
        <column name="status" type="integer" default="0" null="false" comment="inactive, active, banned"/>
        <column name="created_at" type="datetime"/>
        <column name="updated_at" type="datetime"/>

        <unique>
            <unique-column name="username"/>
        </unique>
        <unique>
            <unique-column name="email"/>
        </unique>
        <primary>
            <primary-column name="id"/>
        </primary>
        <index>
            <index-column name="created_at"/>
        </index>
        <index>
            <index-column name="updated_at"/>
        </index>
    </table>

    <table name="user_details" alias="UserDetails" tableClass="Users\Domain\Table\UserDetailsTable"
           entityClass="Users\Domain\Entity\UserDetail">
        <column name="id" type="biginteger" null="false"/>
        <column name="user_id" type="biginteger" null="false"/>
        <column name="key" type="string" null="false"/>
        <column name="value" type="text"/>

        <primary>
            <primary-column name="id"/>
        </primary>
        <unique>
            <unique-column name="user_id"/>
            <unique-column name="key"/>
        </unique>
        <foreign foreignTable="users" onUpdate="noAction" onDelete="cascade">
            <reference local="user_id" foreign="id"/>
        </foreign>
    </table>
</database>
